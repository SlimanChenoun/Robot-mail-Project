import numpy as np
import time
import matplotlib.pyplot as plt
import math
import random
import heapq

def ajouter_cout_zones(grid, zones):
    cout_ajoute = np.zeros(grid.shape)
    for zone in zones:
        x1, y1, x2, y2, bonus = zone
        for i in range(min(x1, x2), max(x1, x2) + 1):
            for j in range(min(y1, y2), max(y1, y2) + 1):
                if 0 <= i < grid.shape[0] and 0 <= j < grid.shape[1]:
                    cout_ajoute[i, j] = bonus
    return cout_ajoute

# Le 0 c'est un obstacle et le 1 un chemin libre
grid = np.array([ #Je dÃ©clare le grid 
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 1, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 1, 1, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 1, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	1, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 1, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 1,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	1, 1, 0, 0,	0, 0, 1, 0,	0, 0, 1, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 1,	1, 0, 1, 0,	0, 0, 1, 0,	0, 1, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 1, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	1, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	1, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 1,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 1, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 1,	0, 0, 0, 0,	0, 1, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	1, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 1,	0, 1, 0, 0,	0, 0, 1, 0,	1, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 1,	0, 0, 1, 0,	0, 1, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	1, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 1, 0, 1,	1, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 1, 0, 0,	1, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 1, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 1, 0,	1, 0, 0, 1,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 1,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	1, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	1, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	1, 1, 1, 1,	1, 1, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 1, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	1, 1, 1, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	1, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 1,	1, 0, 0, 0,	0, 1, 0, 0,	0, 0, 1, 1,	1, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 1,	1, 0, 0, 0,	0, 1, 0, 0],
[0, 0, 0, 0, 1,	1, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 1, 1, 0,	1, 0, 0, 0,	0, 1, 0, 0,	0, 1, 1, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 1, 0,	0, 1, 0, 0,	0, 0, 1, 0],
[0, 0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	1, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	1, 1, 1, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 1, 0, 0,	0, 0, 1, 0,	0, 0, 1, 0],
[0, 0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 1, 1,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 1,	1, 1, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	1, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 1],
[0, 0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 1,	1, 1, 1, 1,	0, 0, 0, 0,	0, 0, 0, 1,	1, 1, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 1, 1,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 1,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 1],
[0, 0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	1, 1, 0, 0,	0, 0, 0, 1,	0, 0, 1, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 1,	1, 0, 0, 1],
[0, 0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 1, 1,	0, 0, 0, 0,	1, 0, 0, 1,	1, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 1,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	1, 0, 0, 1],
[0, 0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 1,	1, 1, 0, 0,	1, 0, 0, 0,	0, 1, 0, 0,	0, 1, 1, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 1, 1, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 1, 0, 0,	1, 0, 0, 1],
[0, 0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 1, 0,	0, 1, 0, 0,	1, 1, 1, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	1, 0, 0, 0,	0, 0, 1, 0,	1, 0, 0, 0,	1, 0, 0, 1],
[0, 0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 1,	0, 1, 0, 0,	0, 0, 0, 0,	1, 1, 1, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 1, 0,	0, 0, 0, 1,	0, 0, 0, 0,	1, 0, 0, 1],
[0, 0, 0, 0, 0,	0, 0, 0, 1,	0, 1, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	1, 1, 0, 1,	1, 0, 0, 0,	1, 0, 1, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 1,	0, 1, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 1,	1, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 1, 1, 1,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 1, 1, 1,	1, 1, 1, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 1,	0, 1, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 1, 0,	1, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 1, 1, 1,	1, 1, 1, 0,	0, 0, 1, 0,	0, 0, 0, 0,	1, 0, 1, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 1, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 1, 0,	0, 0, 0, 1,	0, 0, 1, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	1, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 1, 1, 0,	0, 0, 0, 1,	0, 0, 1, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 1, 0,	0, 0, 1, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 1, 0, 0,	0, 0, 1, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 1, 0,	0, 1, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 1,	1, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	1, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 1,	1, 1, 1, 1,	1, 1, 1, 1,	1, 1, 1, 1,	1, 1, 1, 1,	1, 1, 1, 1,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 1,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 1, 1, 1,	0, 0, 0, 0,	0, 1, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 1, 1,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 1, 1,	1, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	1, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 1, 1, 1,	1, 1, 1, 1,	1, 1, 1, 1,	1, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 1, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 1,	1, 1, 1, 1,	1, 1, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 1, 1,	1, 1, 1, 1,	1, 1, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 1,	0, 1, 0, 0,	0, 0, 0, 0,	1, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[1, 0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	1, 1, 1, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 1,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	1, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	1, 1, 1, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 1, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 1,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 1, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	1, 1, 1, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 1, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 1, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 1,	0, 0, 1, 0,	0, 0, 0, 0,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	1, 1, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	1, 1, 0, 0,	0, 0, 0, 1,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 1,	1, 1, 1, 1,	1, 1, 1, 1,	1, 1, 1, 1,	1, 0, 0, 0,	0, 0, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 0, 0,	0, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0],
[0, 0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 1,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0]
])

# Dimensions de la grille
ROWS, COLS = grid.shape

centreville = [
    (68, 73, 37, 33, 0.25),   # Zone 1: coÃ»t bonus de 0.25
]
cout_ajoute = ajouter_cout_zones(grid, centreville)
num_destinations = int(input("Nombre de livraisons : "))

# Ã‰vÃ©nement route bouchÃ© fonction de Sliman
n_event = int(input("Combien de travaux/Ã©venements Ã  gÃ©nÃ©rer?: "))
for i in range(n_event):
    coordonnee_travaux = input(f"rentrer les coordonnÃ© des travaux/events {i+1} (x,y): ")
    x, y = map(int, coordonnee_travaux.split(','))


# --- dÃ©placement en diagonal avec coÃ»ts zones (EN NOMBRE DE CASES) ---
def deplacement_diagonal(pos, cout_ajoute):
    x, y = pos
    directions = [(-1,0),(1,0),(0,-1),(0,1),(-1,-1),(-1,1),(1,-1),(1,1)]
    for dx, dy in directions:
        nx, ny = x + dx, y + dy
        if 0 <= nx < ROWS and 0 <= ny < COLS and grid[nx][ny] == 1:
            cout_base = 1.0 if dx == 0 or dy == 0 else math.sqrt(2)
            cout_deplacement = cout_base + cout_ajoute[nx, ny]
            yield (nx, ny), cout_deplacement

# --- Heuristique (distance Manhattan pour coÃ»t en cases) ---
def heuristic(a, b, type="euclidien"):
    if type == "manhattan":
        return abs(a[0] - b[0]) + abs(a[1] - b[1])
    else:
        return math.sqrt((a[0] - b[0])**2 + (a[1] - b[1])**2)

#-- Dijkstra avec heapq
def dijkstra(depot, goal, cout_ajoute):
    open_set = []
    heapq.heappush(open_set, (0, depot))
    came_from = {}
    g_score = {depot: 0}
    explored = 0
    
    while open_set:
        current_cost, current = heapq.heappop(open_set)
        explored += 1

        if current == goal:
            # Chemin reconstruit proprement
            path = []
            node = goal
            while node in came_from:
                path.append(node)
                node = came_from[node]
            path.append(depot)
            path.reverse()

            return path, g_score[goal], explored
        
        for neighbor, move_cost in deplacement_diagonal(current, cout_ajoute):
            tentative_g = g_score.get(current, float('inf')) + move_cost
            if tentative_g < g_score.get(neighbor, float('inf')):
                came_from[neighbor] = current
                g_score[neighbor] = tentative_g
                heapq.heappush(open_set, (tentative_g, neighbor))
    
    return [], float('inf'), explored


# ASTAR avec heapq (corrigÃ©)
def astar(depot, goal, cout_ajoute, h_type="euclidien"):
    open_set = []
    heapq.heappush(open_set, (0, depot))
    came_from = {}
    g_score = {depot: 0}
    explored = 0

    while open_set:
        current_f, current = heapq.heappop(open_set)
        explored += 1

        if current == goal:
            path = []
            node = current  # Utilisation d'une variable temporaire pour reconstruire le chemin
            while node in came_from:
                path.append(node)
                node = came_from[node]
            path.append(depot)
            path.reverse()
            return path, g_score[current], explored

        for neighbor, move_cost in deplacement_diagonal(current, cout_ajoute):
            tentative_g = g_score.get(current, float('inf')) + move_cost
            if tentative_g < g_score.get(neighbor, float('inf')):
                came_from[neighbor] = current
                g_score[neighbor] = tentative_g
                f_score = tentative_g + heuristic(neighbor, goal, h_type)
                heapq.heappush(open_set, (f_score, neighbor))

    return [], float('inf'), explored



# -----------------------------
# Planification gloutonne multi-colis
# -----------------------------
def glouton(depot, destinations, cout_ajoute, algo="astar", h_type="euclidien"):
    current = depot
    order = []
    total_path = []
    total_cost = 0
    total_explored = 0

    remaining = destinations.copy()

    while remaining:
        best = None
        best_cost = float('inf')
        best_path = []
        best_explored = 0

        for d in remaining:
            if algo == "dijkstra":
                path, cost, explored = dijkstra(current, d, cout_ajoute)
            else:
                path, cost, explored = astar(current, d, cout_ajoute, h_type)
            if path and cost < best_cost:
                best = d
                best_cost = cost
                best_path = path
                best_explored = explored

        if best is None:
            print(f"Avertissement: Impossible d'atteindre certaines destinations depuis {current}")
            break

        remaining.remove(best)
        order.append(best)
        total_path.extend(best_path[:-1])
        total_cost += best_cost
        total_explored += best_explored
        current = best

    # retour au dÃ©pÃ´t
    if order:  # seulement si on a visitÃ© au moins une destination
        if algo == "dijkstra":
            path, cost, explored = dijkstra(current, depot, cout_ajoute)
        else:
            path, cost, explored = astar(current, depot, cout_ajoute, h_type)
        if path:
            total_path.extend(path)
            total_cost += cost
            total_explored += explored

    return order, total_path, total_cost, total_explored

def compare_algorithms(depot, destinations, cout_ajoute):
    results = {}

    # Dijkstra
    t0 = time.time()
    order, path, cost, explored = glouton(depot, destinations.copy(), cout_ajoute, "dijkstra")
    t1 = time.time()
    results["dijkstra"] = {
        "ordre": order,
        "trajet": path,
        "longueur": cost,
        "temps": t1 - t0,
        "explorÃ©s": explored
    }

    # A* euclidien
    t0 = time.time()
    order, path, cost, explored = glouton(depot, destinations.copy(), cout_ajoute, "astar", "euclidien")
    t1 = time.time()
    results["astar_euclidean"] = {
        "ordre": order,
        "trajet": path,
        "longueur": cost,
        "temps": t1 - t0,
        "explorÃ©s": explored
    }

    # A* manhattan
    t0 = time.time()
    order, path, cost, explored = glouton(depot, destinations.copy(), cout_ajoute, "astar", "manhattan")
    t1 = time.time()
    results["astar_manhattan"] = {
        "ordre": order,
        "trajet": path,
        "longueur": cost,
        "temps": t1 - t0,
        "explorÃ©s": explored
    }

    return results

def afficher_comparaison(results):
    for algo, r in results.items():
        print(f"ðŸ”¹ {algo.upper()}")
        print(f"Ordre de visite: {r['ordre']}")
        print(f"Longueur totale: {r['longueur']:.2f}")
        print(f"NÅ“uds explorÃ©s: {r['explorÃ©s']}")
        print(f"Temps d'exÃ©cution: {r['temps']:.5f} sec\n")

# --- SÃ©lection des destinations ---
free_cells = [(i,j) for i in range(ROWS) for j in range(COLS) if grid[i][j] == 1]
# Point de dÃ©part - NE PAS CHANGER
depot = (55, 0)

# SÃ©lection alÃ©atoire des destinations parmi les cases libres
destinations = random.sample([cell for cell in free_cells if cell != depot], min(num_destinations, len(free_cells)-1))

print(f"\nDÃ©pÃ´t: {depot}")
print(f"Nombre de destinations: {len(destinations)}")
print(f"Destinations: {destinations}")

results = compare_algorithms(depot, destinations, cout_ajoute)
afficher_comparaison(results)

# Appel de la stratÃ©gie gloutonne avec A* (heuristique euclidienne)
optimal_order, optimal_path, total_cost, explored = glouton(depot, destinations, cout_ajoute, "astar", "euclidien")

# --- Affichage du chemin ---
fig, ax = plt.subplots(figsize=(12, 10))
ax.imshow(grid, cmap='gray')
# Zones bonus
for zone in centreville:
    x1, y1, x2, y2, bonus = zone
    ax.add_patch(plt.Rectangle((min(y1, y2) - 0.5, min(x1, x2) - 0.5),
                               abs(y2 - y1) + 1, abs(x2 - x1) + 1,
                               color='orange', alpha=0.3))
# Chemin complet
for (x, y) in optimal_path:
    ax.add_patch(plt.Rectangle((y - 0.5, x - 0.5), 1, 1, color='yellow', alpha=0.6))
# DÃ©part
ax.add_patch(plt.Rectangle((depot[1] - 0.5, depot[0] - 0.5), 1, 1, color='green'))
# Destinations
for i, dest in enumerate(optimal_order):
    ax.add_patch(plt.Rectangle((dest[1] - 0.5, dest[0] - 0.5), 1, 1, color='red'))
    ax.text(dest[1], dest[0], str(i + 1), ha='center', va='center',
            fontweight='bold', fontsize=8, color='white')
plt.xticks([])
plt.yticks([])

# RÃ©sumÃ© console
print("\nRÃ©sumÃ© du parcours :")
print(f"Depot: {depot}")
print(f"Ordre de visite: {optimal_order}")
print(f"Cout total : {total_cost:.2f} cases")
print(f"NÅ“uds explorÃ©s : {explored}")

plt.show()